<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Car Details - CarFinder</title><link rel="stylesheet" href="style.css"/></head>
<body class="theme-light">
  <nav class="nav"><div class="nav-left"><a href="index.html" class="brand">CarFinder</a></div><ul class="nav-right"><li><a href="index.html">Home</a></li><li><a href="find.html">Find</a></li><li><a href="browse.html">Browse</a></li></ul></nav>

  <main class="container content">
    <div id="detailCard"></div>
    <div id="similar" style="margin-top:18px"></div>
  </main>

  <footer class="footer">© CarFinder — Demo site</footer>
  <script src="data.js"></script>
  <script>
    // expect ?id=nn in URL
    const params = new URLSearchParams(location.search);
    const id = parseInt(params.get('id')||'0',10);
    const car = cars.find(c=>c.id===id);
    const target = document.getElementById('detailCard');
    if(!car){ target.innerHTML='<p class="muted">Car not found.</p>'; }
    else {
      target.innerHTML = `<div class="card"><img src="${car.image}" alt=""><div class="card-body"><h2>${car.brand} ${car.model}</h2><p>${car.body} • ${car.fuel} • ${car.seats} seats</p><div class="price">₹${car.price} L</div><p style="margin-top:8px">ID: ${car.id}</p><div style="margin-top:12px"><button class="btn primary" onclick="addToWishlist(${car.id})">Add to wishlist</button> <button class="btn ghost" onclick="toggleCompare(${car.id})">Toggle Compare</button></div></div></div>`;
      // similar by body
      const sim = cars.filter(x=>x.body===car.body && x.id!==car.id).slice(0,4);
      const simDiv = document.getElementById('similar');
      simDiv.innerHTML = '<h3>Similar cars</h3><div class="grid">'+ sim.map(s=>`<article class="card"><img src="${s.image}"/><div class="card-body"><h4>${s.brand} ${s.model}</h4><p>${s.fuel} • ${s.seats} seats</p></div></article>`).join('') + '</div>';
    }

    function addToWishlist(id){ let arr = JSON.parse(localStorage.getItem('cf_wishlist')||'[]'); if(!arr.includes(id)) arr.push(id); localStorage.setItem('cf_wishlist', JSON.stringify(arr)); alert('Added to wishlist'); }
    function toggleCompare(id){ let arr = JSON.parse(localStorage.getItem('cf_compare')||'[]'); if(arr.includes(id)){ arr = arr.filter(x=>x!==id); } else { if(arr.length<4) arr.push(id); else alert('Max 4 items to compare'); } localStorage.setItem('cf_compare', JSON.stringify(arr)); alert('Compare list updated'); }
  </script>
</body>
</html>
